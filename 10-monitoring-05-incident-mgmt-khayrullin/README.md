# Домашнее задание к занятию 17 «Инцидент-менеджмент»

### Выполнил Хайруллин Ильнур

## Основная часть

Составьте постмортем на основе реального сбоя системы GitHub в 2018 году.

Информация о сбое: 

* [в виде краткой выжимки на русском языке](https://habr.com/ru/post/427301/);
* [развёрнуто на английском языке](https://github.blog/2018-10-30-oct21-post-incident-analysis/).


### Ответ:


|                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 
|------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| *Краткое описание инцидента* |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           На серверах GitHub произошёл сбой БД                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| *Причина инцидента*          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          на нескольких сервисах GitHub.com пострадали несколько сетевых разделов                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| *Воздействие*                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     Нельзя было создать issue и оставить комментайри                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| *Обнаружение*                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Обнаружено по мониторингу сервиса                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| *Реакция*                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       предприняты шаги для обеспечения целостности ваших данных, включая приостановку работы событий (hooks) и других внутренних систем обработки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| *Восстановление*             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              Штатная работа бд восстановлена                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| *Тайм-лайн*                  | 2018 October 21 22:52 UTC -  результате регламентных работ по замене вышедшего из строя оптического оборудования 100G была потеряна связь между сетевым концентратором и основным центром обработки данных <br/>2018 October 21 23:07 UTC - внутренние системы мониторинга начали генерировать предупреждения, указывающие на многочисленные сбои в системах. В это время несколько инженеров отвечали и работали над сортировкой входящих уведомлений. К 23:02 UTC инженеры группы быстрого реагирования определили, что топологии многочисленных кластеров баз данных находятся в непредвиденном состоянии. <br/>2018 October 21 23:07 UTC- команда начала работы по устранению<br/>2018 October 21 23:07 UTC - команда респондентов поместила сайт в желтый статус . Это действие автоматически переводит ситуацию в активный инцидент и отправляет предупреждение координатору инцидентов<br/>2018 21 октября 23:19 UTC - Из-за состояния кластеров базы данных было остановлено выполнение заданий, записывающих метаданные о таких вещах, как push-уведомления.<br/>22 октября 2018 г., 00:05 UTC - Инженеры, участвующие в группе реагирования на инциденты, начали разработку плана по устранению несоответствий данных и внедрению наших процедур аварийного переключения для MySQL<br/>22 октября 2018 г., 00:41 UTC - резервное копирование всех затронутых кластеров бд<br/>22 октября 2018 г., 11:12 UTC - Все первичные базы данных снова установлены на восточном побережье США. Это привело к тому, что сайт стал гораздо более отзывчивым<br/>22 октября 2018 г., 13:15 UTC - разработка последующего плана и действия по нему<br/>22 октября 2018 г., 16:24 UTC - аварийное переключение в исходную топологию, после синхронизации реплик<br/>22 октября 2018 23:03 UTC - была подтверждена целостность и правильная работа всех систем |
| *Последующие действия*       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Устранение несоответствий данных<br/> Были предъявлены технические и организационные инициативы:<br/>Настроить конфигурацию Orchestrator, чтобы предотвратить продвижение основных баз данных через региональные границы.<br/>Ускорение перехода на новый механизм отчетов о состоянии, который предоставит более богатый форум для обсуждения активных инцидентов более четким и понятным языком.<br/>За несколько недель до этого инцидента начата общекорпоративная инженерная инициатива по поддержке обслуживания трафика GitHub из нескольких центров обработки данных в схеме «активный/активный/активный». Целью этого проекта является поддержка резервирования N+1 на уровне объекта<br/>Будут более тщательно проверяться все предположения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |